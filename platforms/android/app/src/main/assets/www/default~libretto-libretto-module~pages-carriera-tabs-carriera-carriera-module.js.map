{"version":3,"sources":["webpack:///./src/app/pages/carriera/libretto/libretto.module.ts","webpack:///./src/app/pages/carriera/libretto/libretto.page.html","webpack:///./src/app/pages/carriera/libretto/libretto.page.ts"],"names":[],"mappings":"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","file":"default~libretto-libretto-module~pages-carriera-tabs-carriera-carriera-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { LibrettoPage } from './libretto.page';\nimport {FontAwesomeModule} from '@fortawesome/angular-fontawesome';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        FontAwesomeModule,\n        RouterModule.forChild([\n            {\n                path: '',\n                component: LibrettoPage\n            }\n        ])\n    ],\n    declarations: [LibrettoPage]\n})\nexport class LibrettoPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-grid no-padding>\\n    <ion-row *ngIf=\\\"!globalData.landscape && globalData.iPhoneX\\\">\\n      <ion-col>\\n        <ion-label> </ion-label>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row no-padding>\\n      <ion-col no-padding>\\n        <ion-toolbar>\\n          <ion-buttons slot=\\\"start\\\">\\n            <ion-menu-button></ion-menu-button>\\n          </ion-buttons>\\n          <ion-title>\\n            Libretto\\n          </ion-title>\\n          <ion-buttons slot=\\\"end\\\">\\n            <ion-back-button *ngIf=\\\"srcPage\\\" defaultHref=\\\"{{srcPage}}\\\" text=\\\"Indietro\\\"></ion-back-button>\\n          </ion-buttons>\\n        </ion-toolbar>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-header>\\n<ion-content>\\n  <!--\\n  <ion-refresher slot=\\\"fixed\\\" [disabled]=\\\"false\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  -->\\n  <ion-grid *ngIf=\\\"!libretto || libretto?.length == 0 && rinvioAggiornamento\\\" text-center>\\n    <ion-row>\\n      <ion-col text-center>\\n        <img class=\\\"progress\\\" src=\\\"assets/img/progress.gif\\\" />\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col text-center>\\n        <ion-title><strong>Aggiornamento in corso</strong></ion-title>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col text-center>\\n        <ion-label>un attimo di pazienza</ion-label>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <ion-list no-lines>\\n          <div *ngIf=\\\"!libretto && !rinvioAggiornamento\\\">\\n            <ion-list>\\n              <ion-item text-center>Nessun dato da visualizzare</ion-item>\\n            </ion-list>\\n          </div>\\n\\n          <ion-item-sliding *ngFor=\\\"let item of libretto\\\">\\n            <ion-item [ngClass]=\\\"{'superato' : item.voto, 'da-sostenere' : !item.voto}\\\">\\n              <ion-grid fixed no-padding>\\n                <ion-row>\\n                  <ion-col size=\\\"10\\\">\\n                    <ion-grid no-padding>\\n                      <ion-row no-padding>\\n                        <ion-col>\\n                          <div text-wrap class=\\\"nome-esame\\\">{{ item.descrizione }}</div>\\n                        </ion-col>\\n                      </ion-row>\\n                      <ion-row no-padding class=\\\"dati-esame\\\">\\n                        <ion-col size=\\\"1\\\">\\n                          <ion-icon name=\\\"create\\\"></ion-icon>\\n                        </ion-col>\\n                        <ion-col size=\\\"4\\\">\\n                          <div>{{ item.peso }} CFU</div>\\n                        </ion-col>\\n                        <ion-col *ngIf=\\\"item.voto\\\" size=\\\"1\\\">\\n                          <ion-icon name=\\\"calendar\\\"></ion-icon>\\n                        </ion-col>\\n                        <ion-col *ngIf=\\\"item.voto\\\" size=\\\"4\\\">\\n                          <div>{{item.data_sup | slice:0:10}}</div>\\n                        </ion-col>\\n                        <ion-col *ngIf=\\\"!item.voto\\\" size=\\\"1\\\">\\n                          <ion-icon name=\\\"information-circle\\\"></ion-icon>\\n                        </ion-col>\\n                        <ion-col *ngIf=\\\"!item.voto\\\" size=\\\"4\\\">\\n                          <div>{{item.codice}}</div>\\n                        </ion-col>\\n                        <ion-col *ngIf=\\\"!item.voto\\\" size=\\\"1\\\">\\n                          <ion-icon name=\\\"bookmark\\\"></ion-icon>\\n                        </ion-col>\\n                        <ion-col *ngIf=\\\"!item.voto\\\" size=\\\"1\\\">\\n                          <div>{{item.num_app_futuri}}</div>\\n                        </ion-col>\\n                      </ion-row>\\n                    </ion-grid>\\n                  </ion-col>\\n                  <ion-col size=\\\"2\\\" no-padding *ngIf=\\\"item.voto\\\" class=\\\"voto\\\" align-self-center=\\\"true\\\">\\n                    <ion-label *ngIf=\\\"item.voto!='30 e lode'\\\">\\n                      {{item.voto | slice:0:3}}\\n                    </ion-label>\\n                    <ion-label *ngIf=\\\"item.voto=='30 e lode'\\\">\\n                      30L\\n                    </ion-label>\\n                    <ion-label *ngIf=\\\"!item.voto\\\" size=\\\"2\\\">\\n                      {{item.sta_sce_cod | slice:0:3}}\\n                    </ion-label>\\n                  </ion-col>\\n\\n                </ion-row>\\n\\n              </ion-grid>\\n\\n            </ion-item>\\n\\n            <ion-item-options *ngIf=\\\"!item.voto\\\">\\n              <ion-item-option *ngIf=\\\"item.num_app_futuri!=0\\\" (click)=\\\"cercaAppello(slItem, item)\\\">\\n                Appelli\\n              </ion-item-option>\\n            </ion-item-options>\\n\\n          </ion-item-sliding>\\n\\n        </ion-list>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n</ion-content>\\n\\n<ion-footer  no-padding>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-spinner [hidden]=\\\"!isLoading() || !http.getConnected()\\\"></ion-spinner>\\n      <fa-icon [hidden]=\\\"isLoading() || !http.getConnected()\\\" [icon]=\\\"globalData.faLink\\\"></fa-icon>\\n      <fa-icon [hidden]=\\\"isLoading() || http.getConnected()\\\"  [icon]=\\\"globalData.faUnlink\\\"></fa-icon>\\n    </ion-buttons>\\n\\n    <div class=\\\"testo-footer\\\">\\n      Aggiornato al: {{dataAggiornamento}}\\n    </div>\\n\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button icon-only (click)=\\\"selezionaTab()\\\"><ion-icon name=\\\"more\\\"></ion-icon></ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-footer>\\n\"","import {Component, NgZone, OnInit} from '@angular/core';\nimport {ActionSheetController, ToastController} from '@ionic/angular';\nimport {SyncService} from '../../../services/sync.service';\nimport {GlobalDataService} from '../../../services/global-data.service';\nimport {AccountService} from '../../../services/account.service';\nimport {HttpService} from '../../../services/http.service';\n\n@Component({\n    selector: 'app-page-libretto',\n    templateUrl: 'libretto.page.html',\n})\nexport class LibrettoPage implements OnInit {\n\n    currentPage = '/carriera/tab/libretto';\n    idServizio = 4;\n    srcPage: string;\n\n    libretto = [];\n    dataAggiornamento: string;\n    aggiornamentoVerificato = false;\n    rinvioAggiornamento = false;\n    nrRinvii = 0;\n    maxNrRinvii = 5;\n\n    constructor(\n        public toastCtrl: ToastController,\n        public actionSheetCtrl: ActionSheetController,\n        public ngZone: NgZone,\n        public sync: SyncService,\n        public http: HttpService,\n        public globalData: GlobalDataService,\n        public account: AccountService) {\n    }\n\n    ngOnInit() {\n        this.account.controllaAccount().then(\n            (ok) => {\n                this.srcPage = this.globalData.srcPage;\n                this.globalData.srcPage = this.currentPage;\n                if (this.srcPage === this.globalData.srcPage) {\n                    this.srcPage = null;\n                }\n                this.http.getConnected();\n                this.aggiorna(false, true);\n            }, (err) => {\n                this.globalData.goTo(this.currentPage, '/login', 'root', false);\n            }\n        );\n    }\n\n    aggiorna(interattivo: boolean, sync: boolean) {\n        if (this.sync.loading[this.idServizio]) {\n            this.rinvioAggiornamento = true;\n            this.dataAggiornamento = 'in corso';\n            this.nrRinvii++;\n\n            if (this.nrRinvii < this.maxNrRinvii) {\n                setTimeout(() => {\n                    this.aggiorna(interattivo, sync);\n                }, 2000);\n                return;\n            } else {\n                if (this.http.connessioneLenta) {\n                    this.toastCtrl.create({\n                        message: 'La connessione è assente o troppo lenta. Riprova ad aggiornare i dati più tardi.',\n                        duration: 3000,\n                        position: 'bottom'\n                    }).then( (toast) => {toast.present(); }, (toastErr) => { GlobalDataService.log(2, 'Toast fallito!', toastErr); });\n                }\n            }\n        }\n        this.rinvioAggiornamento = false;\n        this.nrRinvii = 0;\n\n        this.sync.getJson(this.idServizio, true).then(\n            (data) => {\n                if ( this.sync.dataIsChanged(this.libretto, data[0]) ) {\n                    this.libretto = data[0];\n                    if (!this.libretto[0]) {\n                        this.libretto = new Array();\n                    }\n                    setTimeout(() => {\n                        this.controllaAggiornamento();\n                    }, 1000);\n                }\n                this.dataAggiornamento = SyncService.dataAggiornamento(data);\n            },\n            (err) => {\n            }).catch(err => {\n            }\n        );\n    }\n\n    controllaAggiornamento() {\n        // La verifica dell'aggiornamento in background la facciamo solo una volta\n        if (this.aggiornamentoVerificato) {\n            return;\n        }\n\n        // Se stiamo caricando dati dal server rimandiamo la verifica\n        if (this.sync.loading[this.idServizio]) {\n            setTimeout(() => {\n                this.controllaAggiornamento();\n            }, 1000);\n        } else {\n            this.aggiornamentoVerificato = true;\n            this.aggiorna(false, false);\n        }\n    }\n\n    isLoading() {\n        return this.sync.loading[this.idServizio];\n    }\n\n    doRefresh(refresher) {\n        refresher.target.complete();\n\n        if (this.sync.loading[this.idServizio]) {\n            return;\n        }\n\n        this.aggiorna(true, true);\n    }\n\n    cercaAppello(item, ins) {\n        this.globalData.goTo(this.currentPage, '/appelli/' + ins.codice, 'forward', false);\n    }\n\n\n    selezionaTab() {\n        this.actionSheetCtrl.create({\n            header: 'Mostra',\n            buttons: [\n                {\n                    text: 'Piano di studi',\n                    icon: 'school',\n                    handler: () => {\n                        this.globalData.goTo(this.currentPage,\n                            '/carriera/tab/piano-di-studi', 'forward', false);\n                    }\n                }, {\n                    text: 'Esami di sostenere',\n                    icon: 'list-box',\n                    handler: () => {\n                        this.globalData.goTo(this.currentPage,\n                            '/carriera/tab/lista-esami', 'forward', false);\n                    }\n                }, {\n                    text: 'Chiudi',\n                    role: 'cancel',\n                    icon: 'close',\n                    handler: () => {\n                        // console.log('Cancel clicked');\n                    }\n                }\n            ]\n        }).then(\n            (actionSheet) => actionSheet.present()\n        );\n    }\n}\n"],"sourceRoot":""}